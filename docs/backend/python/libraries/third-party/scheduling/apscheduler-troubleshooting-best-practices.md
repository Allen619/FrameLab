---
title: APScheduler 排错与最佳实践
description: 常见问题定位、上线自检与工程建议
---

# APScheduler 排错与最佳实践

## 常见问题

### 任务没有按时执行

- 检查调度器是否真正启动
- 检查时区是否配置一致
- 检查 misfire 策略是否把过期任务丢弃

### 任务重复执行

- 检查多实例部署是否共享同一数据存储与事件代理
- 检查任务函数是否缺少幂等保护

### 任务积压

- 检查执行器并发上限是否过低
- 检查下游依赖是否成为瓶颈
- 检查是否存在长任务占满 worker

## 上线前检查清单

1. 版本基线明确（文档与环境一致）
2. 调度器身份标识明确（多实例可追踪）
3. 数据存储与事件代理配置已压测
4. 关键任务具备幂等与重试策略
5. 监控已覆盖任务成功率、延迟、积压量

## 推荐实践

- 将“调度配置”和“业务函数”分层管理
- 为每类任务定义 SLA 与失败处理策略
- 对关键事件（如 JobAcquired/失败）打点并告警
- 控制 Mermaid 与图示数量，优先保证文本可维护性
